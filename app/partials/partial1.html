<div class="well" ng-show="myData.currentTicket == null">
<h1 class="lead">Trouble Tickets List</h1>
  <form class="form-search pull-center">
    <div class="input-append">
      <input type="text" ng-model="filterText" class="span2 search-query" placeholder="Filter current page">
      <button ng-click="filterText = null" class="btn">Clear Filter</button>
    </div>
  </form>

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th class="span2 sortable" ng-class="sortClass('id')" ng-click="setSort('id')">ID</th>
        <th class="span2 sortable" ng-class="sortClass('description')" ng-click="setSort('description')">Description</th>
        <th class="span2 sortable" ng-class="sortClass('severity')" ng-click="setSort('severity')">Severity</th>
        <th class="span2 sortable" ng-class="sortClass('type')" ng-click="setSort('type')">Type</th>
        <th class="span2 sortable" ng-class="sortClass('creationDate')" ng-click="setSort('creationDate')">Creation Date</th>
        <th class="span2 sortable" ng-class="sortClass('targetResolutionDate')" ng-click="setSort('t')">Target Resolution Date</th>
        <th class="span2 sortable" ng-class="sortClass('status')" ng-click="setSort('status')">Status</th>
        <th class="span2 sortable" ng-class="sortClass('statusChangeReason')" ng-click="setSort('statusChangeReason')">Status Change Reason</th>
        <th class="span2 sortable" ng-class="sortClass('statusChangeDate')" ng-click="setSort('statusChangeDate')">Status Change Date</th>
        <th class="span2 sortable" ng-class="sortClass('resolutionDate')" ng-click="setSort('resolutionDate')">Resolution Date</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="ticket in myData.ticketList | filter:filterText">
        <td class="text-center"><a ng-click="setCurrentTicket(ticket.id)">{{ticket.id}}</a></td>
        <td class="text-center">{{ticket.description}}</td>
        <td class="text-center">{{ticket.severity}}</td>
        <td class="text-center">{{ticket.type}}</td>
        <td class="text-center">{{ticket.creationDate}}</td>
        <td class="text-center">{{ticket.targetResolutionDate}}</td>
        <td class="text-center">{{ticket.status}}</td>
        <td class="text-center">{{ticket.statusChangeReason}}</td>
        <td class="text-center">{{ticket.statusChangeDate}}</td>
        <td class="text-center">{{ticket.resolutionDate}}</td>
      </tr>
    </tbody>
  </table>
</div>

<div class="well" ng-show="myData.currentTicket != null">
<h1 class="lead">Trouble Ticket Details</h1>
  <a ng-click="showAll()"><b>&laquo Back to Trouble Tickets List</b></a>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th class="span2">ID</th>
        <th class="span2">Description</th>
        <th class="span2">Severity</th>
        <th class="span2">Type</th>
        <th class="span2">Creation Date</th>
        <th class="span2">Target Resolution Date</th>
        <th class="span2">Status</th>
        <th class="span2">Status Change Reason</th>
        <th class="span2">Status Change Date</th>
        <th class="span2">Resolution Date</th>
      </tr>
    </thead>
    <tbody>
        <td class="text-center">{{myData.currentTicket.id}}</a></td>
        <td class="text-center">{{myData.currentTicket.description}}</td>
        <td class="text-center">{{myData.currentTicket.severity}}</td>
        <td class="text-center">{{myData.currentTicket.type}}</td>
        <td class="text-center">{{myData.currentTicket.creationDate}}</td>
        <td class="text-center">{{myData.currentTicket.targetResolutionDate}}</td>
        <td class="text-center">{{myData.currentTicket.status}}</td>
        <td class="text-center">{{myData.currentTicket.statusChangeReason}}</td>
        <td class="text-center">{{myData.currentTicket.statusChangeDate}}</td>
        <td class="text-center">{{myData.currentTicket.resolutionDate}}</td>
      </tr>
    </tbody>
  </table>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th class="span2">Related Information</th>
        <th class="span2">Notes</th>
        <th class="span2">Related Parties</th>
     </tr>
    </thead>
    <tbody>
        <td>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span2">Involvement</th>
              <th class="span2">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
            <tr ng-repeat="object in myData.currentTicket.relatedObjects">
              <td class="text-center">{{object.involvement}}</td>
              <td class="text-center">{{object.reference}}</td>
            </tr>
          </tbody>
        </table>
        </td>
        <td>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span2">Date</th>
              <th class="span2">Author</th>
              <th class="span2">Text</th>
            </tr>
          </thead>
          <tbody>
            <tr>
            <tr ng-repeat="note in myData.currentTicket.notes">
              <td class="text-center">{{note.date}}</td>
              <td class="text-center">{{note.author}}</td>
              <td class="text-center">{{note.text}}</td> 
           </tr>
          </tbody>
        </table>
        </td>
        <td>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th class="span2">Role</th>
              <th class="span2">Reference Party</th>
            </tr>
          </thead>
          <tbody>
            <tr>
            <tr ng-repeat="party in myData.currentTicket.relatedParties">
              <td class="text-center">{{party.role}}</td>
              <td class="text-center">{{party.reference}}</td>
            </tr>
          </tbody>
        </table>
        </td>

      </tr>
    </tbody>
  </table>
</div>